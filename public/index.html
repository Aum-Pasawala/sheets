<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
    <title>Sheets Game</title>
    <link rel="stylesheet" href="style/base.css">
    <link rel="stylesheet" href="style/table-cards.css">
    <link rel="stylesheet" href="style/ui.css">
    <link rel="stylesheet" href="style/animations.css">
    <link rel="stylesheet" href="style/video.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
</head>
<body>
    <!-- Home Page -->
    <div id="homePage" class="home-page">
        <div class="home-content">
            <div class="home-hero">
                <div class="cards-image">
                    üÉè üÇ° üÇ± üÉÅ
                </div>
                <h1>Welcome to Sheets!</h1>
                <p class="tagline">The ultimate game of chance, guts, and guessing. Simple to learn but impossible to master, Sheets is the perfect card game for any gathering. All you need is a couple of decks of cards, some friends, and the nerve to bet it all.</p>
                <p class="challenge">Do you have what it takes to predict the cards and take the pot?</p>
                <button id="getStartedBtn" class="get-started-btn">Get Started</button>
            </div>

            <div class="rules-section">
                <h2>How to Play üÉè</h2>
                <p class="rules-intro">Sheets is a straightforward betting game played in a circle. The goal is simple: bet on whether the next card drawn will fall numerically between the two cards on the table.</p>
                
                <div class="rules-grid">
                    <div class="rule-card">
                        <h3>The Setup</h3>
                        <ul>
                            <li><strong>Gather 'Round:</strong> Everyone sits in a circle, and one person is designated as the dealer.</li>
                            <li><strong>Ante Up:</strong> To start the game and build the pot, every player throws one chip (e.g., $0.50) into the center. This is done every time the pot is emptied.</li>
                            <li><strong>The Deal:</strong> The dealer shuffles multiple decks of cards together and places two cards face up on the table, leaving a space between them. For example, a 4 and a 9.</li>
                        </ul>
                    </div>

                    <div class="rule-card">
                        <h3>The Bet</h3>
                        <ul>
                            <li>It's your turn. You look at the two cards (the "sheets"), say a 4 and a 9.</li>
                            <li>You must decide if the next card will land between them (a 5, 6, 7, or 8).</li>
                            <li>You can bet any amount up to the current total value of the pot. Let's say the pot has $5; you can bet anything from $0.50 to $5.</li>
                        </ul>
                    </div>

                    <div class="rule-card">
                        <h3>The Reveal</h3>
                        <ul>
                            <li><strong class="win-text">You Win! ‚úÖ</strong> If the card falls between the two sheets (e.g., a 7), you take your bet amount from the pot. The pot is now smaller, and the turn passes to the next player.</li>
                            <li><strong class="lose-text">You Lose! ‚ùå</strong> If the card is outside the two sheets (e.g., a Jack), you lose your bet. Your money is added to the pot, making it bigger for the next player.</li>
                            <li><strong class="post-text">You Hit the Post! üò¨</strong> If the card is the same value as one of the sheets (e.g., another 4 or another 9), that's a post. You must pay a penalty by doubling your original bet and adding it to the pot. For example, if you bet $3 and hit a post, you add $6 to the pot.</li>
                        </ul>
                    </div>
                </div>

                <div class="keyboard-shortcuts">
                    <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
                    <div class="shortcuts-grid">
                        <div class="shortcut"><kbd>B</kbd> - Place Bet</div>
                        <div class="shortcut"><kbd>P</kbd> - Bet Pot</div>
                        <div class="shortcut"><kbd>Space</kbd> - Pass</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaderboard -->
    <div id="leaderboard" class="leaderboard" style="display: none;">
        <h3>Leaderboard</h3>
        <table>
            <thead>
                <tr>
                    <th>Player</th>
                    <th>Buy-In</th>
                    <th>Net</th>
                    <th>W</th>
                    <th>L</th>
                    <th>P</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
            </tbody>
        </table>
    </div>

    <!-- Buy-in Screen - BIGGER -->
    <div id="buyInScreen" class="modal-overlay" style="display: none;">
        <div class="modal-content buy-in-modal">
            <h2>Buy-in to the Game</h2>
            <p>Enter your name and buy-in amount to join the action!</p>
            <input type="text" id="nameInput" placeholder="Enter your name" maxlength="15">
            <input type="number" id="buyInInput" value="100" step="1.00" placeholder="Enter amount" min="0.50">
            <button id="joinGameBtn">Join Game</button>
        </div>
    </div>

    <div id="aceChoiceScreen" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>You drew an Ace!</h2>
            <p>Choose its value for this hand.</p>
            <button id="aceLowBtn">Low (1)</button>
            <button id="aceHighBtn">High (14)</button>
        </div>
    </div>

    <div id="creditScreen" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Add Credit</h2>
            <p>How much would you like to add to your cash?</p>
            <input type="number" id="creditInput" step="1.00" placeholder="Enter amount">
            <button id="addCreditBtn">Add Credit</button>
            <button id="cancelCreditBtn" class="cancel-btn">Cancel</button>
        </div>
    </div>

    <div class="game-table" id="gameTable" style="display: none;">
        <button id="startGameBtn" class="start-game-btn" style="display: none;">Start Game</button>

        <div class="dealer-area">
            <div class="card" id="card1">
                <div class="card-face card-front"></div>
                <div class="card-face card-back"></div>
            </div>
            <div class="card card-middle" id="nextCard">
                <div class="card-face card-front"></div>
                <div class="card-face card-back"></div>
            </div>
            <div class="card" id="card2">
                <div class="card-face card-front"></div>
                <div class="card-face card-back"></div>
            </div>
        </div>
    
        <div class="center-pot">
            <div class="pot-label">POT</div>
            <div class="pot-amount" id="potAmount">$0.00</div>
        </div>
    
        <div id="players-area"></div>
      
        <div class="message-area" id="message">Connecting...</div>
    
        <div class="action-area" id="actionArea" style="display: none;">
            <input type="number" id="betInput" step="0.01" placeholder="Enter bet">
            <button id="betButton">Bet <kbd>B</kbd></button>
            <div class="pot-group">
                <button id="allInButton" class="allin-btn">All In</button>
                <button id="potButton" class="pot-btn">Pot <kbd>P</kbd></button>
            <div class="fraction-group">
                <button id="quarterPotButton" class="fraction-btn">¬º Pot</button>
                <button id="halfPotButton" class="fraction-btn">¬Ω Pot</button>
            </div>
            </div>
            <button id="passButton">Pass <kbd>Space</kbd></button>
            <button id="creditButton" class="credit-btn">Credit</button>
        </div>

        <div class="settings-area">
            <label for="potRebuildInput">Pot Rebuild:</label>
            <input type="number" id="potRebuildInput" value="5" step="1.00">
            
            <!-- Audio Controls -->
            <div class="audio-controls">
                <label class="toggle-switch">
                    <input type="checkbox" id="sfxToggle" checked>
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">SFX</span>
                </label>
                <label class="toggle-switch">
                    <input type="checkbox" id="musicToggle">
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Music</span>
                </label>
                <label class="toggle-switch">
                    <input type="checkbox" id="postToggle" checked>
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Post</span>
                </label>
            </div>
        </div>

        <button id="sixSevenBtn" class="six-seven-btn" style="display: none;">6-7!</button>
    </div>

    <div id="chat-container" class="chat-container" style="display: none;">
        <div class="chat-header">
            <span class="chat-title">Chat</span>
            <span class="chat-unread-badge" id="chatUnreadBadge" hidden>0</span>
            <button id="chatMinBtn" class="chat-min-btn" aria-label="Minimize chat">‚Äî</button>
        </div>
        <div id="chat-window" class="chat-window"></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Type a message...">
            <button id="chat-send-btn">Send</button>
        </div>
    </div>

    <!-- Video backdrop + post video -->
    <div id="videoBackdrop" style="display:none;"></div>
    <video id="postVideo" src="post.mp4" style="display:none;" preload="auto" playsinline></video>

    <!-- Background Music - MUST BE HERE -->
    <!-- Background Music - MUST BE HERE -->
    <audio id="bgMusic" loop preload="auto">
        <source src="casino-music.mp3" type="audio/mpeg">
    </audio>

    <!-- Big Win Sound -->
    <audio id="bigWinSound" preload="auto">
        <source src="60win.mp3" type="audio/mpeg">
    </audio>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>